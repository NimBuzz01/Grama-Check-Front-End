<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css" />
    <title>User Portal</title>
</head>

<body>
    <div class="container">
        <div id="user-portal-wrapper" class="wrapper">
            <div id="user-portal-header" class="portal-header">
                <img src="img/logo.jpg" alt="help" width="30%" height="auto">
            </div>
            <div id="user-portal-logo" class="portal-logo">
                <a onclick="userAuth.signOut()" class="logout-btn"><img src="img/user.png" alt="user" width="20%" height="auto">
                    LOG OUT</a>
            </div>
            <div id="user-portal-body" class="portal-body">
                <h3>User Portal</h3>
                <a href="request-form.html" class="main-btn">Request Grama Certificate</a>
                <a href="user-status.html" id="check-btn" class="main-btn">Check Status</a>
            </div>
            <div id="user-portal-footer" class="portal-footer">
                <a href="help-page.html" class="help-btn"><img src="img/help.png" alt="help" width="20%"
                        height="auto"></a>
            </div>
        </div>
    </div>
</body>
<script src="https://unpkg.com/@asgardeo/auth-spa@latest/dist/asgardeo-spa.production.min.js"></script>
<script>
  // This client is a class and can be instantiated as follows.
  var userAuth = AsgardeoAuth.AsgardeoSPAClient.getInstance();
  // const auth = new AsgardeoAuthClient(store);

  // Once instantiated, the  client can be initialized by passing the relevant parameters such as the server origin, redirect URL, client ID, etc.
  userAuth.initialize({
        signInRedirectURL: "https://nimbuzz01.github.io/Grama-Check-Front-End/user-portal.html",
        signOutRedirectURL:"https://nimbuzz01.github.io/Grama-Check-Front-End/index.html",
        clientID: "5ynhFBWAfqYznFHVf0J5mYAxexAa",
        baseUrl: "https://api.asgardeo.io/t/sample404",
        scope: [ "openid","profile" ]
  });
  userAuth.signIn({callOnlyOnRedirect:true}).then(Response=>{
    userAuth.getAccessToken().then(Response=>{
            console.log(Response);
            sessionStorage.setItem("token",Response);
            auth.getDecodedIDToken().then((idToken) => {
           var decodedIdToken = idToken;
           // Get claims from the decoded idtoken
           console.log(decodedIdToken);
       })

    });

  })

  var userAuth = AsgardeoAuth.AsgardeoSPAClient.getInstance();
  userAuth.getAccessToken().then(Response=>{
            console.log(Response);
            sessionStorage.setItem("token",Response);
            userAuth.getDecodedIDToken().then((idToken) => {
           var decodedIdToken = idToken;
           // Get claims from the decoded idtoken
           console.log(decodedIdToken);
       })

    });
  // const auth = new AsgardeoAuthClient(store);

  // Once instantiated, the  client can be initialized by passing the relevant parameters such as the server origin, redirect URL, client ID, etc.



</script>


</html>